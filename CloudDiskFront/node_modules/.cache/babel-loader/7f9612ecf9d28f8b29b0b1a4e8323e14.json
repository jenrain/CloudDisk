{"ast":null,"code":"// 剪切板插件\nimport ClipboardJS from \"clipboard\";\nnew ClipboardJS(\".btn\");\nexport default {\n  name: \"shareDialog\",\n\n  data() {\n    return {\n      // 是否显示分享框\n      isShow: this.isShareDialogShow,\n      // 用于展示的数据\n      showItem: \"\"\n    };\n  },\n\n  props: {\n    // 是否显示分享框\n    isShareDialogShow: {\n      type: Boolean,\n\n      default() {\n        return false;\n      }\n\n    },\n    // 分享的文件对象\n    shareItem: {\n      type: Object,\n\n      default() {\n        return {};\n      }\n\n    }\n  },\n  methods: {},\n  watch: {\n    async isShareDialogShow(current) {\n      this.isShow = current;\n      console.log(this.shareItem); // this.$axios.defaults.headers.common[\"Authorization\"] = window.localStorage.getItem(\"token\");\n      // this.$axios({\n      //       url: \"/user/file/delete\",\n      //       method: \"delete\",\n      //       data: {\n      //         identity: item.identity,\n      //       },\n      //     }).then((res) => {\n      //       console.log(res.data);\n      //       if (res.data.success) {\n      //         this.$message.success(\"删除成功!\");\n      //         // this.$emit(\"getFolderList\");\n      //       } else {\n      //         this.$message.error(\"删除失败,请稍后重试!\");\n      //       }\n      //     });\n      // if (current == true) {\n      //   if (\n      //     this.shareItem.filetype == \"audio\" ||\n      //     this.shareItem.filetype == \"video\"\n      //   ) {\n      //     // 如果是音频或视频类型 则重新获取url 以保证url有效期\n      //     let url = await this.getVideoUrl();\n      //     this.showItem = this.shareItem;\n      //     this.showItem.url = url;\n      //   } else {\n      //     this.showItem = this.shareItem;\n      //   }\n      // }\n    }\n\n  },\n  computed: {}\n};","map":{"version":3,"mappings":"AA2BA;AACA;AACA;AAEA;EACAA,mBADA;;EAEAC;IACA;MACA;MACAC,8BAFA;MAGA;MACAC;IAJA;EAMA,CATA;;EAUAC;IACA;IACAC;MACAC,aADA;;MAEAC;QACA;MACA;;IAJA,CAFA;IAQA;IACAC;MACAF,YADA;;MAEAC;QACA;MACA;;IAJA;EATA,CAVA;EA0BAE,WA1BA;EA4BAC;IACA;MACA;MACAC,4BAFA,CAGA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;;EAjCA,CA5BA;EA+DAC;AA/DA","names":["name","data","isShow","showItem","props","isShareDialogShow","type","default","shareItem","methods","watch","console","computed"],"sourceRoot":"src/components","sources":["ShareDialog.vue"],"sourcesContent":["<template>\r\n  <el-dialog\r\n    custom-class=\"shareDialog\"\r\n    :title=\"'分享文件: ' + shareItem.name + '.' + shareItem.type\"\r\n    :visible.sync=\"isShow\"\r\n    @close=\"\r\n      () => {\r\n        $emit('closeDialog');\r\n        showItem = {};\r\n      }\r\n    \"\r\n  >\r\n    <input class=\"urlInput\" v-model=\"showItem\" readonly />\r\n    <el-button\r\n      size=\"small\"\r\n      type=\"primary\"\r\n      data-clipboard-target=\".urlInput\"\r\n      class=\"btn\"\r\n      >复制链接</el-button\r\n    >\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      tips: 请复制上述链接以分享文件\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\n// 剪切板插件\r\nimport ClipboardJS from \"clipboard\";\r\nnew ClipboardJS(\".btn\");\r\n\r\nexport default {\r\n  name: \"shareDialog\",\r\n  data() {\r\n    return {\r\n      // 是否显示分享框\r\n      isShow: this.isShareDialogShow,\r\n      // 用于展示的数据\r\n      showItem: \"\",\r\n    };\r\n  },\r\n  props: {\r\n    // 是否显示分享框\r\n    isShareDialogShow: {\r\n      type: Boolean,\r\n      default() {\r\n        return false;\r\n      },\r\n    },\r\n    // 分享的文件对象\r\n    shareItem: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n  },\r\n  watch: {\r\n    async isShareDialogShow(current) {\r\n      this.isShow = current;\r\n      console.log(this.shareItem);\r\n      // this.$axios.defaults.headers.common[\"Authorization\"] = window.localStorage.getItem(\"token\");\r\n      // this.$axios({\r\n      //       url: \"/user/file/delete\",\r\n      //       method: \"delete\",\r\n      //       data: {\r\n      //         identity: item.identity,\r\n      //       },\r\n      //     }).then((res) => {\r\n      //       console.log(res.data);\r\n      //       if (res.data.success) {\r\n      //         this.$message.success(\"删除成功!\");\r\n      //         // this.$emit(\"getFolderList\");\r\n      //       } else {\r\n      //         this.$message.error(\"删除失败,请稍后重试!\");\r\n      //       }\r\n      //     });\r\n      // if (current == true) {\r\n      //   if (\r\n      //     this.shareItem.filetype == \"audio\" ||\r\n      //     this.shareItem.filetype == \"video\"\r\n      //   ) {\r\n      //     // 如果是音频或视频类型 则重新获取url 以保证url有效期\r\n      //     let url = await this.getVideoUrl();\r\n      //     this.showItem = this.shareItem;\r\n      //     this.showItem.url = url;\r\n      //   } else {\r\n      //     this.showItem = this.shareItem;\r\n      //   }\r\n      // }\r\n    },\r\n  },\r\n  computed: {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-button {\r\n  padding: 10px 60px;\r\n  border-radius: 20px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.urlInput {\r\n  display: block;\r\n  width: 90%;\r\n  height: 35px;\r\n  border-radius: 7px;\r\n  outline: none;\r\n  border: 1px solid #ccc;\r\n  color: rgb(87, 87, 87);\r\n  padding: 0 10px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}