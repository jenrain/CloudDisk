{"ast":null,"code":"require(\"core-js/modules/es.array.unshift.js\");\n\nconst ChainedMap = require('./ChainedMap');\n\nconst ChainedSet = require('./ChainedSet');\n\nconst Orderable = require('./Orderable');\n\nconst Use = require('./Use');\n\nconst Resolve = require('./Resolve');\n\nfunction toArray(arr) {\n  return Array.isArray(arr) ? arr : [arr];\n}\n\nconst Rule = Orderable(class extends ChainedMap {\n  constructor(parent, name, ruleType = 'rule') {\n    super(parent);\n    this.name = name;\n    this.names = [];\n    this.ruleType = ruleType;\n    this.ruleTypes = [];\n    let rule = this;\n\n    while (rule instanceof Rule) {\n      this.names.unshift(rule.name);\n      this.ruleTypes.unshift(rule.ruleType);\n      rule = rule.parent;\n    }\n\n    this.uses = new ChainedMap(this);\n    this.include = new ChainedSet(this);\n    this.exclude = new ChainedSet(this);\n    this.rules = new ChainedMap(this);\n    this.oneOfs = new ChainedMap(this);\n    this.resolve = new Resolve(this);\n    this.extend(['enforce', 'issuer', 'parser', 'resource', 'resourceQuery', 'sideEffects', 'test', 'type']);\n  }\n\n  use(name) {\n    return this.uses.getOrCompute(name, () => new Use(this, name));\n  }\n\n  rule(name) {\n    return this.rules.getOrCompute(name, () => new Rule(this, name, 'rule'));\n  }\n\n  oneOf(name) {\n    return this.oneOfs.getOrCompute(name, () => new Rule(this, name, 'oneOf'));\n  }\n\n  pre() {\n    return this.enforce('pre');\n  }\n\n  post() {\n    return this.enforce('post');\n  }\n\n  toConfig() {\n    const config = this.clean(Object.assign(this.entries() || {}, {\n      include: this.include.values(),\n      exclude: this.exclude.values(),\n      rules: this.rules.values().map(rule => rule.toConfig()),\n      oneOf: this.oneOfs.values().map(oneOf => oneOf.toConfig()),\n      use: this.uses.values().map(use => use.toConfig()),\n      resolve: this.resolve.toConfig()\n    }));\n    Object.defineProperties(config, {\n      __ruleNames: {\n        value: this.names\n      },\n      __ruleTypes: {\n        value: this.ruleTypes\n      }\n    });\n    return config;\n  }\n\n  merge(obj, omit = []) {\n    if (!omit.includes('include') && 'include' in obj) {\n      this.include.merge(toArray(obj.include));\n    }\n\n    if (!omit.includes('exclude') && 'exclude' in obj) {\n      this.exclude.merge(toArray(obj.exclude));\n    }\n\n    if (!omit.includes('use') && 'use' in obj) {\n      Object.keys(obj.use).forEach(name => this.use(name).merge(obj.use[name]));\n    }\n\n    if (!omit.includes('rules') && 'rules' in obj) {\n      Object.keys(obj.rules).forEach(name => this.rule(name).merge(obj.rules[name]));\n    }\n\n    if (!omit.includes('oneOf') && 'oneOf' in obj) {\n      Object.keys(obj.oneOf).forEach(name => this.oneOf(name).merge(obj.oneOf[name]));\n    }\n\n    if (!omit.includes('resolve') && 'resolve' in obj) {\n      this.resolve.merge(obj.resolve);\n    }\n\n    if (!omit.includes('test') && 'test' in obj) {\n      this.test(obj.test instanceof RegExp || typeof obj.test === 'function' ? obj.test : new RegExp(obj.test));\n    }\n\n    return super.merge(obj, [...omit, 'include', 'exclude', 'use', 'rules', 'oneOf', 'resolve', 'test']);\n  }\n\n});\nmodule.exports = Rule;","map":{"version":3,"names":["ChainedMap","require","ChainedSet","Orderable","Use","Resolve","toArray","arr","Array","isArray","Rule","constructor","parent","name","ruleType","names","ruleTypes","rule","unshift","uses","include","exclude","rules","oneOfs","resolve","extend","use","getOrCompute","oneOf","pre","enforce","post","toConfig","config","clean","Object","assign","entries","values","map","defineProperties","__ruleNames","value","__ruleTypes","merge","obj","omit","includes","keys","forEach","test","RegExp","module","exports"],"sources":["D:/Desktop/cloud-disk-front/node_modules/webpack-chain/src/Rule.js"],"sourcesContent":["const ChainedMap = require('./ChainedMap');\nconst ChainedSet = require('./ChainedSet');\nconst Orderable = require('./Orderable');\nconst Use = require('./Use');\nconst Resolve = require('./Resolve');\n\nfunction toArray(arr) {\n  return Array.isArray(arr) ? arr : [arr];\n}\n\nconst Rule = Orderable(\n  class extends ChainedMap {\n    constructor(parent, name, ruleType = 'rule') {\n      super(parent);\n      this.name = name;\n      this.names = [];\n      this.ruleType = ruleType;\n      this.ruleTypes = [];\n\n      let rule = this;\n      while (rule instanceof Rule) {\n        this.names.unshift(rule.name);\n        this.ruleTypes.unshift(rule.ruleType);\n        rule = rule.parent;\n      }\n\n      this.uses = new ChainedMap(this);\n      this.include = new ChainedSet(this);\n      this.exclude = new ChainedSet(this);\n      this.rules = new ChainedMap(this);\n      this.oneOfs = new ChainedMap(this);\n      this.resolve = new Resolve(this);\n      this.extend([\n        'enforce',\n        'issuer',\n        'parser',\n        'resource',\n        'resourceQuery',\n        'sideEffects',\n        'test',\n        'type',\n      ]);\n    }\n\n    use(name) {\n      return this.uses.getOrCompute(name, () => new Use(this, name));\n    }\n\n    rule(name) {\n      return this.rules.getOrCompute(name, () => new Rule(this, name, 'rule'));\n    }\n\n    oneOf(name) {\n      return this.oneOfs.getOrCompute(\n        name,\n        () => new Rule(this, name, 'oneOf'),\n      );\n    }\n\n    pre() {\n      return this.enforce('pre');\n    }\n\n    post() {\n      return this.enforce('post');\n    }\n\n    toConfig() {\n      const config = this.clean(\n        Object.assign(this.entries() || {}, {\n          include: this.include.values(),\n          exclude: this.exclude.values(),\n          rules: this.rules.values().map((rule) => rule.toConfig()),\n          oneOf: this.oneOfs.values().map((oneOf) => oneOf.toConfig()),\n          use: this.uses.values().map((use) => use.toConfig()),\n          resolve: this.resolve.toConfig(),\n        }),\n      );\n\n      Object.defineProperties(config, {\n        __ruleNames: { value: this.names },\n        __ruleTypes: { value: this.ruleTypes },\n      });\n\n      return config;\n    }\n\n    merge(obj, omit = []) {\n      if (!omit.includes('include') && 'include' in obj) {\n        this.include.merge(toArray(obj.include));\n      }\n\n      if (!omit.includes('exclude') && 'exclude' in obj) {\n        this.exclude.merge(toArray(obj.exclude));\n      }\n\n      if (!omit.includes('use') && 'use' in obj) {\n        Object.keys(obj.use).forEach((name) =>\n          this.use(name).merge(obj.use[name]),\n        );\n      }\n\n      if (!omit.includes('rules') && 'rules' in obj) {\n        Object.keys(obj.rules).forEach((name) =>\n          this.rule(name).merge(obj.rules[name]),\n        );\n      }\n\n      if (!omit.includes('oneOf') && 'oneOf' in obj) {\n        Object.keys(obj.oneOf).forEach((name) =>\n          this.oneOf(name).merge(obj.oneOf[name]),\n        );\n      }\n\n      if (!omit.includes('resolve') && 'resolve' in obj) {\n        this.resolve.merge(obj.resolve);\n      }\n\n      if (!omit.includes('test') && 'test' in obj) {\n        this.test(\n          obj.test instanceof RegExp || typeof obj.test === 'function'\n            ? obj.test\n            : new RegExp(obj.test),\n        );\n      }\n\n      return super.merge(obj, [\n        ...omit,\n        'include',\n        'exclude',\n        'use',\n        'rules',\n        'oneOf',\n        'resolve',\n        'test',\n      ]);\n    }\n  },\n);\n\nmodule.exports = Rule;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}