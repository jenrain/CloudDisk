{"ast":null,"code":"// 定时器名称\nlet timer;\nexport default {\n  name: \"VideoPlayer\",\n\n  data() {\n    return {\n      isVideoPlayerShow: false,\n      videoInfo: {\n        path: \"\",\n        name: \"\"\n      },\n      videoUrl: \"\"\n    };\n  },\n\n  props: {},\n  methods: {\n    // 请求\n    // 根据vid请求对应的url\n    async getVideoUrl() {\n      this.videoUrl = this.videoInfo.path;\n    },\n\n    // 事件\n    // 点击关闭视频播放器的回调\n    closeVideoPlayer() {\n      // 先暂停视频\n      document.querySelector(\".currentVideoPlayer\").pause();\n      this.isVideoPlayerShow = false;\n      this.$store.commit(\"updateIsVideoPlayerShow\", false); //   半秒后清空数据\n\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        this.videoInfo = {\n          name: \"\",\n          path: \"\"\n        };\n      }, 500);\n    },\n\n    // 视频开始播放的回调\n    onPlay() {\n      if (this.$store.state.musicPlayState) {\n        this.$store.commit(\"updateMusicPlayState\", false);\n      }\n    }\n\n  },\n  watch: {\n    \"$store.state.isVideoPlayerShow\"(current) {\n      this.isVideoPlayerShow = current;\n\n      if (current) {\n        this.videoInfo = this.$store.state.currentVideoInfo; // 请求视频的url\n\n        this.getVideoUrl();\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAkBA;AACA;AAEA;EACAA,mBADA;;EAEAC;IACA;MACAC,wBADA;MAEAC;QACAC,QADA;QAEAJ;MAFA,CAFA;MAMAK;IANA;EAQA,CAXA;;EAYAC,SAZA;EAaAC;IACA;IACA;IACA;MACA;IACA,CALA;;IAOA;IACA;IACAC;MACA;MACAC;MAEA;MACA,qDALA,CAMA;;MACAC;MACAC;QACA;UACAX,QADA;UAEAI;QAFA;MAIA,CALA,EAKA,GALA;IAMA,CAvBA;;IAyBA;IACAQ;MACA;QACA;MACA;IACA;;EA9BA,CAbA;EA6CAC;IACA;MACA;;MACA;QACA,oDADA,CAEA;;QACA;MACA;IACA;;EARA;AA7CA","names":["name","data","isVideoPlayerShow","videoInfo","path","videoUrl","props","methods","closeVideoPlayer","document","clearTimeout","timer","onPlay","watch"],"sourceRoot":"src/components","sources":["VideoPlayer.vue"],"sourcesContent":["<template>\r\n  <div class=\"VideoPlayer\" :class=\"isVideoPlayerShow ? 'showVideoPlayer' : ''\">\r\n    <div class=\"close\">\r\n      <i class=\"iconfont icon-close\" @click=\"closeVideoPlayer\"></i>\r\n    </div>\r\n    <div class=\"videoName\">{{ videoInfo.name }}</div>\r\n    <div class=\"videoContainer\">\r\n      <video\r\n        :src=\"videoUrl\"\r\n        controls\r\n        class=\"currentVideoPlayer\"\r\n        @play=\"onPlay\"\r\n      ></video>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 定时器名称\r\nlet timer;\r\n\r\nexport default {\r\n  name: \"VideoPlayer\",\r\n  data() {\r\n    return {\r\n      isVideoPlayerShow: false,\r\n      videoInfo: {\r\n        path: \"\",\r\n        name: \"\",\r\n      },\r\n      videoUrl: \"\",\r\n    };\r\n  },\r\n  props: {},\r\n  methods: {\r\n    // 请求\r\n    // 根据vid请求对应的url\r\n    async getVideoUrl() {\r\n      this.videoUrl = this.videoInfo.path;\r\n    },\r\n\r\n    // 事件\r\n    // 点击关闭视频播放器的回调\r\n    closeVideoPlayer() {\r\n      // 先暂停视频\r\n      document.querySelector(\".currentVideoPlayer\").pause();\r\n\r\n      this.isVideoPlayerShow = false;\r\n      this.$store.commit(\"updateIsVideoPlayerShow\", false);\r\n      //   半秒后清空数据\r\n      clearTimeout(timer);\r\n      timer = setTimeout(() => {\r\n        this.videoInfo = {\r\n          name: \"\",\r\n          path: \"\",\r\n        };\r\n      }, 500);\r\n    },\r\n\r\n    // 视频开始播放的回调\r\n    onPlay() {\r\n      if (this.$store.state.musicPlayState) {\r\n        this.$store.commit(\"updateMusicPlayState\", false);\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    \"$store.state.isVideoPlayerShow\"(current) {\r\n      this.isVideoPlayerShow = current;\r\n      if (current) {\r\n        this.videoInfo = this.$store.state.currentVideoInfo;\r\n        // 请求视频的url\r\n        this.getVideoUrl();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.VideoPlayer {\r\n  position: relative;\r\n  background-color: #fff;\r\n  position: absolute;\r\n  /* bottom: -100vh; */\r\n  transition: bottom 0.5s;\r\n  /* transform: translateY(100vh); */\r\n  z-index: 100;\r\n  display: none;\r\n}\r\n\r\n.videoContainer {\r\n  display: flex;\r\n  height: 100%;\r\n  justify-content: center;\r\n  margin-top: 10vh;\r\n}\r\n\r\n.showVideoPlayer {\r\n  display: block;\r\n  bottom: 0;\r\n  width: 60%;\r\n  height: 80%;\r\n}\r\n\r\nvideo {\r\n  max-height: 85vh;\r\n  max-width: 80vw;\r\n  outline: none;\r\n}\r\n\r\n.videoName {\r\n  position: absolute;\r\n  top: 5vh;\r\n  left: 50%;\r\n  font-size: 18px;\r\n  transform: translate(-50%, -50%);\r\n  width: 200px;\r\n  text-align: center;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  color: #25262b;\r\n}\r\n\r\ni {\r\n  cursor: pointer;\r\n}\r\n\r\n.icon-close {\r\n  position: absolute;\r\n  font-size: 30px;\r\n  top: 20px;\r\n  left: 30px;\r\n  color: #25262b;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}