{"ast":null,"code":"import { handleLongString } from \"../plugins/utils.js\";\nexport default {\n  name: \"Attribute\",\n  props: {\n    // 当前查看属性的文件的id\n    fileId: {\n      type: Number,\n\n      default() {\n        return 0;\n      }\n\n    },\n    attributeTop: {\n      type: Number,\n\n      default() {\n        return 0;\n      }\n\n    },\n    attributeLeft: {\n      type: Number,\n\n      default() {\n        return 0;\n      }\n\n    },\n    isAttributeShow: {\n      type: Boolean,\n\n      default() {\n        return false;\n      }\n\n    }\n  },\n\n  data() {\n    return {\n      isAttributeShow: this.isAttributeShow,\n      fileInfo: null,\n      fileId: this.fileId\n    };\n  },\n\n  methods: {\n    //   请求\n    // 根据id查看当前文件的属性\n    async getFileAttribute() {\n      this.$axios.defaults.headers.common[\"Authorization\"] = window.localStorage.getItem(\"token\");\n      this.$axios({\n        url: \"/file/detail/get\",\n        method: \"post\",\n        data: {\n          id: this.$store.state.currentParentId\n        }\n      }).then(res => {\n        console.log(res.data);\n\n        if (res.data.success) {\n          this.$emit('update:listData', res.data.files_list);\n          this.$emit('update:searchFolder', res.data.folder_list);\n        } else {\n          this.$message.error(\"文件请求失败\");\n        }\n      });\n    },\n\n    handleClose() {\n      this.isAttributeShow = false;\n      this.fileInfo = \"\";\n      this.$emit(\"closeAttribute\");\n    }\n\n  },\n\n  created() {},\n\n  watch: {// fileId() {\n    //   this.getFileAttribute();\n    // },\n  },\n  filters: {\n    handleLongString\n  }\n};","map":{"version":3,"mappings":"AAuEA;AAEA;EACAA,iBADA;EAEAC;IACA;IACAC;MACAC,YADA;;MAEAC;QACA;MACA;;IAJA,CAFA;IAQAC;MACAF,YADA;;MAEAC;QACA;MACA;;IAJA,CARA;IAcAE;MACAH,YADA;;MAEAC;QACA;MACA;;IAJA,CAdA;IAoBAG;MACAJ,aADA;;MAEAC;QACA;MACA;;IAJA;EApBA,CAFA;;EA6BAI;IACA;MACAD,qCADA;MAEAE,cAFA;MAGAP;IAHA;EAKA,CAnCA;;EAoCAQ;IACA;IACA;IACA;MACA;MACA;QACAC,uBADA;QAEAC,cAFA;QAGAJ;UACAK;QADA;MAHA,GAMAC,IANA,CAMAC;QACAC;;QACA;UACA;UACA;QACA,CAHA,MAGA;UACA;QACA;MACA,CAdA;IAeA,CApBA;;IAqBAC;MACA;MACA;MACA;IACA;;EAzBA,CApCA;;EA+DAC,YA/DA;;EAgEAC,QACA;IACA;IACA;EAHA,CAhEA;EAqEAC;IACAC;EADA;AArEA","names":["name","props","fileId","type","default","attributeTop","attributeLeft","isAttributeShow","data","fileInfo","methods","url","method","id","then","res","console","handleClose","created","watch","filters","handleLongString"],"sourceRoot":"src/components","sources":["Attribute.vue"],"sourcesContent":["<template>\r\n  <el-dialog\r\n    title=\"文件属性\"\r\n    :visible.sync=\"isAttributeShow\"\r\n    width=\"20%\"\r\n    :before-close=\"handleClose\"\r\n  >\r\n    <el-form>\r\n      <el-form-item style=\"margin-top: -20px;\" label=\"文件名: \" :label-width=\"formLabelWidth\">\r\n        {{ fileInfo.name }}\r\n      </el-form-item>\r\n      <el-form-item style=\"margin-top: -20px;\" label=\"文件类型: \" :label-width=\"formLabelWidth\">\r\n        {{ fileInfo.filetype }}\r\n      </el-form-item>\r\n      <el-form-item style=\"margin-top: -20px;\" label=\"文件大小: \" :label-width=\"formLabelWidth\">\r\n        {{ (fileInfo.size / 1048576).toFixed(2) + \"MB\"}}\r\n      </el-form-item>\r\n    </el-form>\r\n    <!-- <div\r\n    class=\"Attribute\"\r\n    v-if=\"fileInfo.id\"\r\n    @mousedown=\"moveDialog\"\r\n    :style=\"{\r\n      top: attributeTop + 'px',\r\n      left: attributeLeft + 'px',\r\n    }\"\r\n  >\r\n    <div class=\"header\">\r\n      {{\r\n        (fileInfo.name + \".\" + fileInfo.type + \" 属性\")\r\n          | handleLongString(10, 15)\r\n      }}\r\n      <i class=\"iconfont icon-close\" @click=\"closeAttribute\"></i>\r\n    </div>\r\n    <div class=\"group\">\r\n      <div class=\"groupItem\">\r\n        <span class=\"left\">文件类型:</span>\r\n        <span class=\"right\">{{\r\n          fileInfo.filetype + \"(.\" + fileInfo + \")\"\r\n        }}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"group\">\r\n      <div class=\"groupItem\">\r\n        <span class=\"left\">位置:</span>\r\n        <span class=\"right\">{{ fileInfo }}</span>\r\n      </div>\r\n      <div class=\"groupItem\">\r\n        <span class=\"left\">大小:</span>\r\n        <span class=\"right\">{{\r\n          fileInfo == null\r\n            ? \"未知大小\"\r\n            : (fileInfo / 1048576).toFixed(2) + \" MB\"\r\n        }}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"group\">\r\n      <div class=\"groupItem\">\r\n        <span class=\"left\">创建时间:</span>\r\n        <span class=\"right\">{{ fileInfo}}</span>\r\n      </div>\r\n      <div class=\"groupItem\">\r\n        <span class=\"left\">修改时间:</span>\r\n        <span class=\"right\">{{ fileInfo }}</span>\r\n      </div>\r\n    </div>\r\n  </div> -->\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { handleLongString } from \"../plugins/utils.js\";\r\n\r\nexport default {\r\n  name: \"Attribute\",\r\n  props: {\r\n    // 当前查看属性的文件的id\r\n    fileId: {\r\n      type: Number,\r\n      default() {\r\n        return 0;\r\n      },\r\n    },\r\n    attributeTop: {\r\n      type: Number,\r\n      default() {\r\n        return 0;\r\n      },\r\n    },\r\n    attributeLeft: {\r\n      type: Number,\r\n      default() {\r\n        return 0;\r\n      },\r\n    },\r\n    isAttributeShow: {\r\n      type: Boolean,\r\n      default() {\r\n        return false;\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      isAttributeShow: this.isAttributeShow,\r\n      fileInfo: null,\r\n      fileId: this.fileId,\r\n    };\r\n  },\r\n  methods: {\r\n    //   请求\r\n    // 根据id查看当前文件的属性\r\n    async getFileAttribute() {\r\n      this.$axios.defaults.headers.common[\"Authorization\"] = window.localStorage.getItem(\"token\");\r\n        this.$axios({\r\n          url: \"/file/detail/get\",\r\n          method: \"post\",\r\n          data: {\r\n            id: this.$store.state.currentParentId,\r\n          }\r\n        }).then((res) => {\r\n          console.log(res.data);\r\n          if (res.data.success) {\r\n            this.$emit('update:listData', res.data.files_list)\r\n            this.$emit('update:searchFolder', res.data.folder_list)\r\n          } else {\r\n            this.$message.error(\"文件请求失败\");\r\n          }\r\n        })\r\n    },\r\n    handleClose() {\r\n      this.isAttributeShow = false;\r\n      this.fileInfo = \"\";\r\n      this.$emit(\"closeAttribute\");\r\n    }\r\n  },\r\n  created() {},\r\n  watch: {\r\n    // fileId() {\r\n    //   this.getFileAttribute();\r\n    // },\r\n  },\r\n  filters: {\r\n    handleLongString,\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}