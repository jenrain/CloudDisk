{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// 倒计时名称\nlet timer;\nexport default {\n  name: \"Login\",\n\n  data() {\n    return {\n      login: {\n        name: \"\",\n        password: \"\"\n      },\n      registered: {\n        email: \"\",\n        password: \"\",\n        code: \"\",\n        name: \"\"\n      },\n      activeName: 'first',\n      // 倒计时秒数\n      countDownSecond: 60,\n      // 是否显示秒数\n      isCountDownShow: false\n    };\n  },\n\n  methods: {\n    onSubmit() {\n      this.$axios({\n        url: \"/user/login\",\n        method: \"post\",\n        data: {\n          name: this.login.name,\n          password: this.login.password\n        }\n      }).then(res => {\n        console.log(res.data);\n\n        if (res.data.success) {\n          this.$message.success(\"登录成功！\"); // 将返回的用户信息保存至localstorage中\n\n          window.localStorage.setItem(\"userInfo\", JSON.stringify(this.login.name)); // 将token存入本地\n\n          window.localStorage.setItem(\"token\", res.data.token); //   跳转至主界面\n\n          this.$router.push(\"/index\");\n        } else {\n          this.$message.warning(\"登录失败,账号或密码错误!\");\n        }\n      });\n    },\n\n    handleClick(e) {\n      console.log(e.name);\n    },\n\n    // 获取验证码\n    async getCode() {\n      this.isCountDownShow = true;\n      this.$axios({\n        url: \"/user/code/send/register\",\n        method: \"post\",\n        data: {\n          email: this.registered.email\n        }\n      }).then(res => {\n        console.log(res.data);\n\n        if (res.data.success) {\n          this.startCountDown();\n        }\n      });\n    },\n\n    // 倒计时\n    startCountDown() {\n      this.countDownSecond = 60;\n      timer = setInterval(() => {\n        this.countDownSecond--;\n\n        if (this.countDownSecond == 0) {\n          clearInterval(timer);\n          this.isCountDownShow = false;\n        }\n      }, 1000);\n    },\n\n    clickRegistered() {\n      this.$axios({\n        url: \"/user/register\",\n        method: \"post\",\n        data: {\n          name: this.registered.name,\n          password: this.registered.password,\n          code: this.registered.code,\n          email: this.registered.email\n        }\n      }).then(res => {\n        console.log(res.data);\n\n        if (res.data.success) {\n          this.$message.success(\"注册成功!\");\n          this.login.name = this.registered.name;\n          this.activeName = 'first';\n          this.registered = {\n            email: \"\",\n            password: \"\",\n            code: \"\",\n            name: \"\"\n          };\n        } else {\n          this.$message.error(\"注册失败,请稍后重试!\");\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";AA6FA;AACA;AAEA;EACAA,aADA;;EAEAC;IACA;MACAC;QACAF,QADA;QAEAG;MAFA,CADA;MAKAC;QACAC,SADA;QAEAF,YAFA;QAGAG,QAHA;QAIAN;MAJA,CALA;MAWAO,mBAXA;MAYA;MACAC,mBAbA;MAcA;MACAC;IAfA;EAiBA,CApBA;;EAqBAC;IACAC;MACA;QACAC,kBADA;QAEAC,cAFA;QAGAZ;UACAD,qBADA;UAEAG;QAFA;MAHA,GAOAW,IAPA,CAOAC;QACAC;;QACA;UACA,+BADA,CAEA;;UACAC,4BACA,UADA,EAEAC,+BAFA,EAHA,CAOA;;UACAD,qDARA,CASA;;UACA;QACA,CAXA,MAWA;UACA;QACA;MACA,CAvBA;IAwBA,CA1BA;;IA4BAE;MACAH;IACA,CA9BA;;IAgCA;IACA;MACA;MACA;QACAJ,+BADA;QAEAC,cAFA;QAGAZ;UACAI;QADA;MAHA,GAMAS,IANA,CAMAC;QACAC;;QACA;UACA;QACA;MACA,CAXA;IAYA,CA/CA;;IAiDA;IACAI;MACA;MACAC;QACA;;QACA;UACAC;UACA;QACA;MACA,CANA,EAMA,IANA;IAOA,CA3DA;;IA6DAC;MACA;QACAX,qBADA;QAEAC,cAFA;QAGAZ;UACAD,0BADA;UAEAG,kCAFA;UAGAG,0BAHA;UAIAD;QAJA;MAHA,GASAS,IATA,CASAC;QACAC;;QACA;UACA;UACA;UACA;UACA;YACAX,SADA;YAEAF,YAFA;YAGAG,QAHA;YAIAN;UAJA;QAMA,CAVA,MAUA;UACA;QACA;MACA,CAxBA;IAyBA;;EAvFA;AArBA","names":["name","data","login","password","registered","email","code","activeName","countDownSecond","isCountDownShow","methods","onSubmit","url","method","then","res","console","window","JSON","handleClick","startCountDown","timer","clearInterval","clickRegistered"],"sourceRoot":"src/base","sources":["login.vue"],"sourcesContent":["<template>\r\n    <div class=\"login\">\r\n      <div class=\"main\">\r\n        <div class=\"logoContainer\">\r\n          <div class=\"logo\"><img src=\"../assets/img/logo.png\" alt=\"\" /></div>\r\n          <div class=\"name\">666盘</div>\r\n        </div>\r\n        <div\r\n          class=\"mainBox\"\r\n          :class=\"activeName === 'first' ? '' : 'mainBoxRegistered'\"\r\n        >\r\n          <el-tabs\r\n            v-model=\"activeName\"\r\n            type=\"card\"\r\n            @tab-click=\"handleClick\"\r\n            stretch\r\n          >\r\n            <el-tab-pane label=\"登录\" name=\"first\">\r\n              <div class=\"loginInput\">\r\n                <el-form ref=\"form\" :model=\"login\" label-width=\"80px\">\r\n                  <el-form-item>\r\n                    <el-input\r\n                      v-model=\"login.name\"\r\n                      placeholder=\"请输入姓名\"\r\n                    ></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item>\r\n                    <el-input\r\n                      v-model=\"login.password\"\r\n                      type=\"password\"\r\n                      placeholder=\"请输入密码\"\r\n                    ></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"onSubmit\">登录</el-button>\r\n                  </el-form-item>\r\n                </el-form>\r\n              </div>\r\n            </el-tab-pane>\r\n            <el-tab-pane label=\"注册\" name=\"second\">\r\n              <div class=\"registeredInput\">\r\n                <el-form ref=\"form\" :model=\"login\" label-width=\"80px\">\r\n                  <el-form-item>\r\n                    <el-input\r\n                      v-model=\"registered.email\"\r\n                      placeholder=\"请输入邮箱\"\r\n                    ></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item\r\n                    >\r\n                    <el-input\r\n                      v-model=\"registered.password\"\r\n                      placeholder=\"请输入密码\"\r\n                      type=\"password\"\r\n                    ></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item>\r\n                    <el-input\r\n                      v-model=\"registered.name\"\r\n                      placeholder=\"请输入名称\"\r\n                    ></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item class=\"codeContainer\">\r\n                    <el-input\r\n                      v-model=\"registered.code\"\r\n                      placeholder=\"请输入验证码\"\r\n                    ></el-input>\r\n                    <div class=\"codeButtonContainer\">\r\n                      <el-button\r\n                        size=\"mini\"\r\n                        class=\"getcode\"\r\n                        v-if=\"!isCountDownShow\"\r\n                        @click=\"getCode\"\r\n                        >获取验证码</el-button\r\n                      >\r\n                      <div class=\"countDown\" v-else>{{ countDownSecond }} s</div>\r\n                    </div>\r\n                  </el-form-item>\r\n                  <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"clickRegistered\"\r\n                      >注册</el-button\r\n                    >\r\n                  </el-form-item>\r\n                </el-form>\r\n              </div>\r\n            </el-tab-pane>\r\n          </el-tabs>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  // 倒计时名称\r\n  let timer;\r\n  \r\n  export default {\r\n    name: \"Login\",\r\n    data() {\r\n      return {\r\n        login: {\r\n          name: \"\",\r\n          password: \"\",\r\n        },\r\n        registered: {\r\n          email: \"\",\r\n          password: \"\",\r\n          code: \"\",\r\n          name: \"\",\r\n        },\r\n        activeName: 'first',\r\n        // 倒计时秒数\r\n        countDownSecond: 60,\r\n        // 是否显示秒数\r\n        isCountDownShow: false,\r\n      };\r\n    },\r\n    methods: {\r\n      onSubmit() {\r\n        this.$axios({\r\n          url: \"/user/login\",\r\n          method: \"post\",\r\n          data: {\r\n            name: this.login.name,\r\n            password: this.login.password,\r\n          },\r\n        }).then((res) => {\r\n          console.log(res.data);\r\n          if (res.data.success) {\r\n            this.$message.success(\"登录成功！\");\r\n          // 将返回的用户信息保存至localstorage中\r\n          window.localStorage.setItem(\r\n            \"userInfo\",\r\n            JSON.stringify(this.login.name)\r\n          );\r\n          // 将token存入本地\r\n          window.localStorage.setItem(\"token\", res.data.token);\r\n          //   跳转至主界面\r\n          this.$router.push(\"/index\");\r\n          } else {\r\n            this.$message.warning(\"登录失败,账号或密码错误!\");\r\n          }\r\n        });\r\n      },\r\n      \r\n      handleClick(e) {\r\n        console.log(e.name);\r\n      },\r\n  \r\n      // 获取验证码\r\n      async getCode() {\r\n        this.isCountDownShow = true;\r\n        this.$axios({\r\n          url: \"/user/code/send/register\",\r\n          method: \"post\",\r\n          data: {\r\n            email: this.registered.email\r\n          },\r\n        }).then((res) => {\r\n          console.log(res.data);\r\n          if (res.data.success) {\r\n            this.startCountDown();\r\n          }\r\n        });\r\n      },\r\n  \r\n      // 倒计时\r\n      startCountDown() {\r\n        this.countDownSecond = 60;\r\n        timer = setInterval(() => {\r\n          this.countDownSecond--;\r\n          if (this.countDownSecond == 0) {\r\n            clearInterval(timer);\r\n            this.isCountDownShow = false;\r\n          }\r\n        }, 1000);\r\n      },\r\n  \r\n      clickRegistered() {\r\n        this.$axios({\r\n          url: \"/user/register\",\r\n          method: \"post\",\r\n          data: {\r\n            name: this.registered.name,\r\n            password: this.registered.password,\r\n            code: this.registered.code,\r\n            email: this.registered.email,\r\n          },\r\n        }).then((res) => {\r\n          console.log(res.data);\r\n          if (res.data.success) {\r\n            this.$message.success(\"注册成功!\");\r\n            this.login.name = this.registered.name;\r\n            this.activeName = 'first';\r\n            this.registered = {\r\n              email: \"\",\r\n              password: \"\",\r\n              code: \"\",\r\n              name: \"\",\r\n            };\r\n          } else {\r\n            this.$message.error(\"注册失败,请稍后重试!\");\r\n          }\r\n        });\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .login {\r\n    background-color: #ecefff;\r\n    height: 100vh;\r\n  }\r\n  \r\n  .logoContainer {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 10px;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .logo {\r\n    width: 50px;\r\n  }\r\n  \r\n  .logo img {\r\n    width: 100%;\r\n  }\r\n  \r\n  .name {\r\n    color: #25262b;\r\n    font-size: 20px;\r\n    letter-spacing: 4px;\r\n    font-weight: bold;\r\n    margin-left: 7px;\r\n  }\r\n  \r\n  .main {\r\n    width: 350px;\r\n    height: 400px;\r\n    position: absolute;\r\n    right: 10vw;\r\n    top: 15vh;\r\n  }\r\n  \r\n  .mainBox {\r\n    width: 350px;\r\n    background-color: #fff;\r\n    height: 330px;\r\n    border-radius: 10px;\r\n    overflow: hidden;\r\n  }\r\n  \r\n  .mainBoxRegistered {\r\n    height: 430px;\r\n  }\r\n  \r\n  .el-form /deep/ .el-form-item__content {\r\n    margin: 0 !important;\r\n    padding: 0 20px;\r\n  }\r\n  \r\n  .el-input /deep/ input {\r\n    border-radius: 10px;\r\n  }\r\n  \r\n  .loginInput {\r\n    margin-top: 20px;\r\n  }\r\n  \r\n  .el-tabs /deep/ .is-active,\r\n  .el-tabs /deep/ div:hover {\r\n    color: #595bb3;\r\n  }\r\n  \r\n  .el-tabs /deep/ .is-active {\r\n    background-color: #fff;\r\n  }\r\n  \r\n  .el-tabs /deep/ .el-tabs__item {\r\n    border: none !important;\r\n    font-size: 18px;\r\n    height: 50px;\r\n    line-height: 50px;\r\n  }\r\n  \r\n  .el-tabs /deep/ .el-tabs__nav {\r\n    border: none;\r\n  }\r\n  \r\n  .el-tabs /deep/ .el-tabs__nav-scroll {\r\n    background-color: #f5f5f6;\r\n  }\r\n  \r\n  .el-input /deep/ .el-input__inner {\r\n    height: 48px;\r\n    font-size: 15px;\r\n  }\r\n  \r\n  .el-button {\r\n    width: 100%;\r\n    background-color: #6c6dbb;\r\n    border: none;\r\n    border-radius: 10px;\r\n    margin-top: 10px;\r\n    height: 45px;\r\n    font-size: 15px;\r\n  }\r\n  \r\n  .el-button:hover {\r\n    background-color: #595bb3;\r\n  }\r\n  \r\n  .codeContainer {\r\n    position: relative;\r\n  }\r\n  \r\n  .codeButtonContainer {\r\n    position: absolute;\r\n    top: 50%;\r\n    right: 30px;\r\n    transform: translateY(-50%);\r\n  }\r\n  \r\n  .getcode {\r\n    background-color: #6c6dbb;\r\n    color: white;\r\n    height: 35px;\r\n    margin: 0;\r\n  }\r\n  \r\n  .countDown {\r\n    color: rgb(141, 141, 141);\r\n  }\r\n  </style>\r\n  "]},"metadata":{},"sourceType":"module"}